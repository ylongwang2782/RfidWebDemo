<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tab inventory</title>
    <style>
        body {
            background-color: #f2f2f2;
            font-family: Arial, sans-serif;
        }

        th,
        td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
            word-break: break-all;
        }

        th {
            background-color: #f2f2f2;
        }

        .card {
            margin: 4px;
            padding: 4px;
            border-radius: 4px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .card-content {
            padding: 4px;
        }

        .text-bold {
            font-weight: bold;
        }

        .text-red {
            color: #ff4444;
        }

        .divider {
            border-bottom: 1px solid #ccc;
            margin: 8px 0;
        }

        .linear-layout {
            display: flex;
            align-items: center;
            margin: 10px 8px;
        }

        .linear-layout.horizontal {
            flex-direction: row;
        }

        .linear-layout .text-center {
            text-align: center;
            flex-grow: 1;
        }

        .button {
            display: block;
            width: calc(100% - 16px);
            margin: 4px auto;
            padding: 10px;
            background-color: #007bff;
            color: #fff;
            text-align: center;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        .button:hover {
            background-color: #0056b3;
        }

        .recycler-view {
            margin: 8px;
            overflow-y: auto;
        }

        /* New styles for the navigation bar */
        .navbar {
            display: flex;
            justify-content: space-between;
            background-color: #007bff;
            padding: 10px;
            color: #fff;
            border-top-left-radius: 4px;
            border-top-right-radius: 4px;
        }

        .navbar a {
            color: white;
            padding: 14px 20px;
            text-decoration: none;
            text-align: center;
        }

        .navbar a:hover {
            background-color: #0056b3;
            color: black;
            border-radius: 4px;
        }
    </style>
</head>

<body>

    <!-- Navigation bar -->
    <div class="navbar">
        <a href="#" id="tab_inventory_page">标签盘点</a>
        <a href="#" id="tab_access_page">标签读写</a>
    </div>

    <div class="card">
        <div class="card-content">
            <div class="linear-layout">
                <span>扫描信息</span>
            </div>
            <div class="linear-layout horizontal">
                <span class="text-bold">标签数量</span>
                <span class="text-red text-bold" id="tag-num" style="flex-grow: 1; text-align: right;">0</span>
            </div>
            <div class="divider"></div>
            <div class="linear-layout horizontal">
                <span class="text-bold">累计返回标签次数</span>
                <span class="text-red text-bold" id="tag-total-count" style="flex-grow: 1; text-align: right;">0</span>
            </div>
        </div>
    </div>

    <button class="button" id="start-scan-button" type="button">开始识别</button>

    <div class="card">
        <div class="card-content">
            <div class="linear-layout horizontal">
                <span class="text-bold" style="flex: 4.5; text-align: center;">EPC</span>
                <span class="text-bold" style="flex: 1; text-align: center;">COUNT</span>
            </div>
            <div class="divider"></div>
            <div class="recycler-view" id="recycler-view">
                <!-- RecyclerView content goes here -->
            </div>
        </div>
    </div>

    <script>
        function onKeyDownHandler() {
            startScanButton.textContent = '停止识别';
        }

        function onKeyUpHandler() {
            startScanButton.textContent = '开始识别';
        }

        function singleTagScanDoneHandler() {
            // updateTagCounts(5, 10);
            const data = JSON.parse(AndroidEpc.getData()); // 调用 Android 接口获取数据
            updateTable(data);
        }

        function updateTagCounts(labelCount, totalLabelCount) {
            // 选择并更新标签数量
            document.getElementById('tag-num').textContent = labelCount;
            // 选择并更新累计返回标签数量
            document.getElementById('tag-total-count').textContent = totalLabelCount;
        }

        function updateTable(data) {
            // 获取当前选中的<option>元素
            const dataBody = document.getElementById('recycler-view');
            dataBody.innerHTML = ''; // 清空表格内容
            data.forEach(tag => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${tag.epcStr}</td>
                    <td>${tag.tagData}</td>
                    <td>${tag.findCnt}</td>
                    `;
                dataBody.appendChild(row);
            });

            tagCount = data.length;
            tagTotalFindCount = 0;
            data.forEach(tag => {
                tagTotalFindCount += tag.findCnt;
            });
            updateTagCounts(tagCount, tagTotalFindCount);
        }

        function updateStartScanButton() {
            const startScanButton = document.getElementById('start-scan-button');
            if (startScanButton.textContent === '开始识别') {
                startScanButton.textContent = '停止识别';
            }
            else {
                startScanButton.textContent = '开始识别';
            }
        }

        // Add event listeners for navigation
        document.getElementById('tab_inventory_page').addEventListener('click', function () {
            window.location.href = 'http://192.168.8.100:8082/';
        });

        document.getElementById('tab_access_page').addEventListener('click', function () {
            window.location.href = 'http://192.168.8.100:8083/';
        });
    </script>
</body>

</html>